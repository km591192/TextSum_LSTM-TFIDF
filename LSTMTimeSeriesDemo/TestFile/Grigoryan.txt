В ряде предметных областей таких, как управление кризисными службами, существует необходимость моделирования некоторой части окружающего мира, её визуализации с целью прогнозирования развития природных явлений, катастроф или стихийных бедствий. В коммерческой сфере аналогичная задача стоит при создании некоторых видеоигр. 
Основой таких моделей является мир или местность, сгенерированная случайным или псевдослучайным образом.
Целью работы является создание многослойного генератора ландшафта, в котором каждый слой обладает специфическими свойствами. 
Генерация проходит в четыре этапа: создание слоя, создание маски, фильтрация и «склейка» с другими слоями. 
Каждый слой представляет собой карту высот, полученную одним из трёх способов: случайная генерация с помощью генератора шумов, использование данных программы Shuttle Radar Topography Mission, импорт некоторого графического файла. 
С каждым слоем ассоциирован слой-маска, который ограничивает влияние слоя на другие слои. 
Кроме того, каждый слой может быть подвергнут фильтрации, например, для сглаживания рельефа, поворота слоя на некоторый угол, отражения по вертикали или горизонтали и т.п. 
Так как для генерации случайной карты высот требуется генератор шумов, было приятно решение создать генератор, который имеет возможность расширения с использованием плагинов.
Согласно исследованию Oxfam за 2011 год, которое затронуло более чем 140 стран. 
За почти треть века зафиксирован заметный рост климатических катастроф: с 133 в 1980 году до 350 в 2010. 
После 1975 года в результате катастроф и стихийных бедствий погибло более 2,2 миллионов человек. 
Две трети смертей были вызваны катастрофами, связанными с климатом. В предыдущем исследовании Oxfam, проведенном в 2009 году, природные бедствия каждый год в среднем затрагивали порядка четверти миллиарда человек. 
Причём, подавляющее большинство катастроф – 98% были климатическими. 
Также согласно исследованию Interactive Software Federation of Europe за 2008 год, в ходе которого была собрана статистика 5 различных регионов в результате опроса людей в возрасте от 16 до 49 лет, выяснив, что видеоигры находятся в числе самых популярных способов проведения досуга. Около 40 процентов опрошенных заявили, что играют от 6 до 14 часов в неделю. 72 процента опрошенных используют видеоигры в качестве развлечения. 57 процентов опрошенных отмечают, что подобный способ развлечения помогает им стимулировать воображение, а 45 процентов заявили, что видеоигры заставляют их думать.
Две вышеперечисленные предметные области объединяет задача генерации ландшафта, в первом случае, для проведения симуляции в уникальных географических условиях, при этом стоит задача генерации максимально правдоподобного ландшафта, учитывая множество свойств реальной окружающей среды, таких как: температура, давления, скорость и направление ветра и т.д. Во втором случае задача состоит в том, что необходимо создать продуманный ландшафт, который будет подходить под игровой дизайн, и будет обладать необходимыми для видеоигры свойствами. 
Целью работы является создание и реализация метода генерации ландшафта, которой мог бы удовлетворить следующие условия: 
•Ландшафт должен делиться на тайлы, для возможности масштабирования детализации генерируемой поверхности, каждый тайл – это небольшой участок строго заданного размера.
•В каждом тайле должна содержаться информация, которая могла бы меняться в зависимости от предметной области, с помощью плагинов.
•При генерации должна быть возможность создания существующего ландшафта, или приближенного к нему.
•Необходима возможность создания случайного, однако однотипного ландшафта, который отличался бы в деталях, однако глобальная структура, которого была бы изначально заданна.
К системам генерации ландшафта можно отнести следующие программные продукты:
Программный продукт Bryce – как в 3D-редакторах, основу сцены в Bryce составляют объекты: в отношении объектов можно применять булевы операции, управлять их освещением, присваивать материалы-текстуры и т.п. 
Однако, наряду со стандартными примитивами, в пакете имеются и особые объекты, представляющие собой части пейзажа: облака, плоскость земли и воды, горы и камни. 
Программный продукт Vue 5 Esprit – для создания рельефа можно автоматически сгенерировать какой-нибудь вариант горного ландшафта с помощью модуля Terrain, который в свою очередь использует генератор шума, а можно воспользоваться редактором рельефа и создать нужный рельеф вручную при помощи специальных инструментов. 
Для этого сначала задается приблизительная форма поверхности (каньон, дюны и т.п.), а затем результат корректируется специальными средствами. 
По окончании работы, для придания рельефу большей естественности, можно дополнить его каменными глыбами и наложить специальные эффекты, позволяющие имитировать различные варианты эрозии. 
Возможна генерация ландшафта на основе обычной карты высот.
Создание ландшафта начинается с формирования рельефа в окнах проекций. 
Сначала из набора векторных линий строится каркас будущей местности, затем полученная векторная система фрактализуется путем добавления в нее случайных элементов по определенному фрактальному закону, а потом вычисляется положение всех элементов ландшафта относительно уровня моря, в результате чего формируется пространственный каркас моделируемой местности. Созданный рельеф можно сгладить, применить к нему эрозию, покрыть его снегом или льдом. 
Можно внедрить в готовый ландшафт и дороги, для чего нужно просто нарисовать соответствующую дороге кривую.
Программный продукт VistaPro Основой построения рельефа в нем являются цифровые карты высот DEM (Digital Elevation Maps). 
Можно воспользоваться существующими картами высот из американских баз данных Geological Survey и NASA и создать, например, реальный пейзаж Большого каньона или Фудзиямы. 
Можно обратиться к встроенному генератору рельефа, который предложит бесконечное число вариантов случайно сформированных карт высот, а можно отсканировать топографическую карту любой местности и импортировать ее в форматах PCX, BMP и TGA — по такой карте VistaPro самостоятельно создаст карту высот и сформирует на ее основе рельеф. 
Полученный рельеф можно подвергнуть эрозии, сгладить. При желании несложно экспортировать полученный пейзаж в трехмерную программу моделирования и рендеринга.
Программный продукт Terragen в котором все составляющие пейзажа (рельеф, вода, облака, атмосфера, освещение) представлены в виде отдельных слоев, которые последовательно наносятся друг на друга и могут быть скорректированы на всех стадиях его подготовки. 
Рельеф местности определяется картой высот, которую можно нарисовать самостоятельно, сгенерировать автоматически или импортировать из другого приложения. 
К тому же для каждого из названных параметров имеется очень большое количество настроек, и от каждой из них зависит конечный результат. 
Программный продукт GenesisIV – в пакете реализованы поддержка баз данных ГИС, возможности фотореалистического рендеринга и применение инструментов картографии, вследствие чего программа в основном ориентирована не на художников, а на тех пользователей, которые работают с геоинформационными системами, поскольку GenesisIV предоставляет им привычные инструменты для визуализации ландшафтов по ГИС-данным. 
Так, GenesisIV можно воспользоваться для быстрого создания пейзажей на основе реальных данных из базы данных карт высот, что позволит наглядно представить ту или иную информацию для клиентов компании (при этом подключать художника не потребуется).
Так как любой ландшафт можно представить в виде карты высот, то при генерации ландшафта главной задачей является именно её создание. 
По результатам анализа методов, которые используют вышеперечисленные системы, можно сделать вывод, что они в основном использует три варианта получения карты высот:генератор шума, созданная вручную карта высот, импортированая из геоинформационных систем
генератор шума
Преимущества:
•большая вариативность генерируемой поверхности;
•масштабируемость;
•возможность тонкой настройки генераторов;
•возможность создания бесконечного ландшафта;
•скорость создания.
Недостатки:
•отсутствие сходства с реальным ландшафтом;
•сложность создания бесшовного ландшафта.
созданная вручную карта высот
Преимущества:
•возможность создания бесшовного ландшафта; 
•точная настройка параметров и свойств карты.
Недостатки:
•сложность; 
•скорость;
•невозможность создания бесконечного ландшафта.
импортированая из геоинформационных систем
Преимущества:
•сходство с реальным ландшафтом; 
Недостатки:
•невозможность создания бесшовного ландшафта; 
•невозможность создания бесконечного ландшафта;
•большой объем хранимых данных.
Технология, положенная в основу многослойного генератора ландшафта должна предоставить возможность комплексного или последовательного использования различных методов генерации среды таким образом, который обеспечит нивелирование недостатков отдельных методов. Технология генерации состоит из четырёх этапов. 
Первым этапом является создание слоев, путем генерации базовой поверхности. В рамках данной технологии базовыми способами генерации были выбраны: генерация с помощью шумов, импорт карт высот и использование карты высот, полученных в результате миссии Shuttle Radar Topography Mission.
Однако в разрабатываемом продукте все методы подключаются с помощью системы плагинов, что даёт возможность в зависимости от предметной области, использовать для генерации поверхности любые существующие методы и алгоритмы.  
Например, такие как Diamond-Square, предложенный компанией Mojang AB. 
На втором этапе создается маска для каждого слоя. Маска слоя – двухмерная матрица, которая состоит из вещественных чисел в диапазоне [0,1]. 
В дальнейшем маска слоя применятся к базовой поверхности, тем скрывая ненужные участки генерируемой ранее поверхности. Таким способом мы можем сгенерировать случайный ландшафт, с неслучайной местностью. 
По умолчанию маска слоя должна быть “белой”, и никаким образом не влиять на слой. Маску слоя можно создать в ручном режиме, закрашивая области специальной кистью, подгрузить готовую маску, или сгенерировать.
На третьем этапе к слою можно применить различные фильтры, которые так же должны иметь возможность расширения с помощью плагинов. 
Фильтр – любая операция над слоем, к примеру, переворот на n градусов, или же отражение по оси. Так же должны быть предусмотрены фильтры, для выделения, и сглаживания частот. 
На последнем этапе выполняется склеивание слоев. 
Имея набор бинарных, арифметических операции а, также дополнительные операции, которые поставляются в виде плагинов, мы можем использовать их комбинацию для того, чтобы получить результирующую поверхность. 
Операции описываются с помощью функций от двух аргументов. 
После склейки слоев, в каждом тайле ландшафта, генерируется необходимые свойства. Базовыми свойствами является температура, влажность, биом. Все свойства являются настраиваемыми. 
Карта температур является произведением градиентного и фрактального шума, что придает реализма, разбиение на широты. Аналогичным образом относительно высоты тайла корректируется температура. 
Карта влажности представляет собой фрактальный шум, скорректированный, относительно высоты тайла. Биом определяется согласно классификации Уиттекера на основе средней годовой влажности и средней годовой температуры.  
Помимо базовых свойств тайла, можно задать постобработку полученного ландшафта. 
Например, для решения задачи прогнозирования стихийных бедствий введен модуль, который позволяет генерировать на полученном ландшафте некоторую инфраструктуру, такую как населенные пункты и дороги.
Населенные пункты, представлены в трех вариациях: город, поселок городского типа, село, отличия заключаются в наличие различных средств, и их объема, для ликвидации последствий стихийных бедствий. 
Дороги представлены двух типов: междугородняя магистраль, и обычная дорога. Свойства тайла и варианты постобработки можно дополнить с помощью плагинов.
Одним из ключевых модулей является генератор шумов, который создает базовую поверхность для слоя. Генератор должен в себя включать возможность использование любого, из следующего видов шумов:
•Value Noise;
•Perlin Noise;
•Simplex Noise;
•Cubic Noise;
•Cellular Noise; 
•White Noise.
Каждый из шумов порождает отличную от другого шума текстуру, которую можно использовать для генерации различных типов местности. 
К примеру, для получения ландшафта в виде типичного океанического острова можно использовать шум Перлина с наложенной на него маской в виде радиального градиента, размещенного в центральной области карты. 
Для имитации береговой линии с эрозией можно использовать белый шум, а для имитации сглаженного океанического дна – сотовый шум.
Для создания карт на таких поверхностях как тор, сфера, цилиндр, требуется бесшовный вариант шума принято решение использовать многомерный шум, спроецированный в пространство с меньшей размерностью. 
Для данной цели используется лента Мебиуса, которая позволяет добиться бесшовности по одной из осей и восьмерка Клейна, с помощью которой можно добиться бесшовности по двум осям.
На основе предложенных методов была спроектирована система, которая позволяет генерировать ландшафт, используя существующие методы, которые возможно подключать с помощью плагинов, а также накладывать на них различные фильтры и маски.
Созданный в рамках проекта программный продукт может быть использован для симуляции природных явлений, катастроф, стихийных бедствий в системах управления кризисными службами (МЧС, медицины катастроф и пр.), а также для создания реалистичного ландшафта местности в видеоиграх или кинематографе. 
Технология плагинов обеспечивает дальнейшее развитие и расширение функционала системы не только со стороны разработчиков, но и обычными пользователями, которые ознакомились со спецификацией модулей.